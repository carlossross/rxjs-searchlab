<section class="page">
  <h1>SearchLab Â· RxJS + Signals + Store</h1>

  <div class="search-bar">
    <input
      type="text"
      [value]="store.searchQuery()"
      (input)="onSearchChange($event.target.value)"
      placeholder="Escribe para buscar (mÃ­n. 2 letras)..."
    />
  </div>

  <!-- ðŸ”µ Filtros -->
  <div class="filters">
    <button type="button" (click)="onFilterChange('all')" [class.active]="store.filter() === 'all'">
      Todos
    </button>

    <button
      type="button"
      (click)="onFilterChange('title')"
      [class.active]="store.filter() === 'title'"
    >
      Solo tÃ­tulo (Angular/RxJS)
    </button>

    <button
      type="button"
      (click)="onFilterChange('description')"
      [class.active]="store.filter() === 'description'"
    >
      Solo descripciÃ³n (Angular/RxJS)
    </button>
  </div>

  <div class="status">
    @if (store.loading()) {
    <span>Buscando...</span>
    } @else if (store.error()) {
    <span>{{ store.error() }}</span>
    }
  </div>

  <ul class="results">
    @for (item of store.results(); track item.id) {
    <li>
      <h3>{{ item.title }}</h3>
      <p>{{ item.description }}</p>
    </li>
    } @if ( !store.loading() && !store.error() && store.results().length === 0 &&
    store.searchQuery().trim().length >= 2 ) {
    <li><em>Sin resultados.</em></li>
    }
  </ul>

  @if(store.total()>0){
  <div class="pagination">
    <button type="button" (click)="onPrevPage()" [disabled]="!store.hasPrev()">Anterior</button>

    <span>
      PÃ¡gina {{ store.page() }} de {{ store.totalPages() }} ({{ store.total() }} resultados)
    </span>

    <button type="button" (click)="onNextPage()" [disabled]="!store.hasNext()">Siguiente</button>
  </div>
  }
</section>
